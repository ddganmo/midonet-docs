= Midolman Installation

The Midolman agent shall be installed on all network and compute nodes.

. *Install Midolman package*
+
====
[source]
----
# apt-get install midolman
----
====
. *Set up mn-conf*
+
====
Edit /etc/midolman/midolman.conf to point mn-conf to the ZooKeeper cluster:

[source,subs="quotes"]
----
[zookeeper]
zookeeper_hosts = *_controller_*:2181,*_network_*:2181,*_compute1_*:2181
----

----
====
. *Configure access to the NSDB for all agents*
+
====
This step needs to happen only once, it will set up access to the NSDB for
all MidoNet nodes. Run the following command to set the cloud-wide values for
the ZooKeeper and Cassandra server addresses:

[source,bash]
----
$ echo << EOF | mn-conf set -t default
zookeeper {
    zookeeper_hosts = $CONTROLLER:2181,$NETWORK:2181,$COMPUTE1:2181
}

cassandra {
    servers = $CONTROLLER,$NETWORK,$COMPUTE1
}
EOF


----
====
. *Start Midolman*
+
====
[source]
----
# start midolman
----
====
